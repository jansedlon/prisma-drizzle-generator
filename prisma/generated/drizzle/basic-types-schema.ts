import { text, varchar, char, integer, bigint, real, decimal, smallint, doublePrecision, boolean, timestamp, date, time, jsonb, pgTable, defaultNow, unique, $onUpdate } from 'drizzle-orm/pg-core';
import { statusEnum, priorityEnum } from './enums.js';

export const basicTypes = pgTable('basic_types', {
  id: text('id').primaryKey(),
  text: text('text').notNull(),
  optionalText: text('optionalText'),
  uniqueText: text('uniqueText').unique().notNull(),
  defaultText: text('defaultText').notNull().default('default value'),
  varcharField: varchar('varcharField', { length: 255 }).notNull(),
  textField: text('textField').notNull(),
  charField: char('charField', { length: 10 }).notNull(),
  intField: integer('intField').notNull(),
  optionalInt: integer('optionalInt'),
  defaultInt: integer('defaultInt').notNull().default(42),
  bigIntField: bigint('bigIntField', { mode: 'number' }).notNull(),
  floatField: real('floatField').notNull(),
  decimalField: decimal('decimalField').notNull(),
  smallIntField: smallint('smallIntField').notNull(),
  integerField: integer('integerField').notNull(),
  bigintField: bigint('bigintField', { mode: 'number' }).notNull(),
  realField: real('realField').notNull(),
  doubleField: doublePrecision('doubleField').notNull(),
  preciseDecimal: decimal('preciseDecimal', { precision: 10, scale: 2 }).notNull(),
  moneyField: decimal('moneyField').notNull(),
  boolField: boolean('boolField').notNull(),
  defaultBool: boolean('defaultBool').notNull().default(true),
  dateTime: timestamp('dateTime', { withTimezone: true, mode: "date" }).notNull(),
  optionalDate: timestamp('optionalDate', { withTimezone: true, mode: "date" }),
  defaultNow: timestamp('defaultNow', { withTimezone: true, mode: "date" }).notNull().default(defaultNow()),
  updatedAt: timestamp('updatedAt', { withTimezone: true, mode: "date" }).notNull().$onUpdate(() => new Date()),
  dateField: date('dateField', { mode: "date" }).notNull(),
  timeField: time('timeField', { withTimezone: true }).notNull(),
  timestampField: timestamp('timestampField', { mode: "date" }).notNull(),
  timestamptzField: timestamp('timestamptzField', { withTimezone: true, mode: "date" }).notNull(),
  jsonField: jsonb('jsonField').notNull(),
  optionalJson: jsonb('optionalJson'),
  jsonbField: jsonb('jsonbField').notNull(),
  bytesField: text('bytesField').notNull(),
  optionalBytes: text('optionalBytes'),
  status: statusEnum('status').notNull().default('PENDING'),
  priority: priorityEnum('priority').notNull(),
  customVarchar: text('customVarchar').notNull(),
  customDefault: text('customDefault').notNull().default('original'),
  uuidField: text('uuidField').notNull(),
  createdAt: timestamp('createdAt', { withTimezone: true, mode: "date" }).notNull().default(defaultNow())
}, (table) => [
  unique('text_int_unique').on(table.text, table.intField)
]);